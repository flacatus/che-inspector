name: CheInspector
version: "0.0.0"
ide: "Eclipse Che"
spec:
  deployment:
    cli:
      flags: "--installer=olm --platform=openshift"
  tests:
    # Execute happy-path tests
    - name: "happy-path"
      namespace: "eclipse-che"
      image: "quay.io/eclipse/che-e2e:nightly"
      env:
      - name: TEST_SUITE
        value: test-devworkspace-happy-path
      - name: NODE_TLS_REJECT_UNAUTHORIZED
        value: '0'
      - name: TS_SELENIUM_BASE_URL
        value: 'REPLACE_TS_BASE_URL'
      - name: TS_SELENIUM_DEVWORKSPACE_URL
        value: 'REPLACE_TS_DEVWORKSPACE_URL'
      - name: TS_SELENIUM_MULTIUSER
        value: 'true'
      - name: TS_SELENIUM_LOG_LEVEL
        value: TRACE
      - name: TS_SELENIUM_OCP_USERNAME
        value: 'user'
      - name: TS_SELENIUM_OCP_PASSWORD
        value: "user"
      - name: TS_SELENIUM_VALUE_OPENSHIFT_OAUTH
        value: 'true'
      - name: TS_SELENIUM_USERNAME
        value: "admin"
      - name: TS_SELENIUM_PASSWORD
        value: 'admin'
      - name: TS_OCP_LOGIN_PAGE_PROVIDER_TITLE
        value: "htpasswd"
      - name: DELETE_WORKSPACE_ON_FAILED_TEST
        value: "true"
      artifacts:
        fromContainerPath: "/tmp/e2e/report"
        to: "tmp/happy-path-results"
    # Execute test Harness tests
    - name: "test-harness"
      namespace: "openshift-workspaces"
      image: "quay.io/eclipse/che-e2e:nightly"
      args:
        - "--osd-provider=false"
        - "--namespace=openshift-workspaces"
        - "--subscription-name=codeready-workspaces"
        - "--channel=latest"
        - "--source-ns=openshift-marketplace"
        - "--catalog-name=redhat-operators"
        - "--package-name=codeready-workspaces"
        - "--csv-name=crwoperator.v2.7.1"
      artifacts:
        fromContainerPath: "/test-run-results"
        to: "tmp/test-harnes-results"
  reporter:
    - ci: "Openshift CI"
      provider: "slack"
      token: ""
      url: ""
    - ci: "Openshift CI"
      provider: "mail"
      receivers: ""
